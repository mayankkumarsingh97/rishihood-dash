(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{428:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(5155),r=s(5695),l=s(2115);let n=(0,l.memo)(e=>{let{page:t,limit:s,studentList:r=[]}=e;return(0,a.jsx)("div",{className:"overflow-x-auto font-roboto",children:(0,a.jsxs)("table",{className:"min-w-full bg-white shadow rounded-lg",children:[(0,a.jsx)("thead",{className:"bg-gray-100 text-left w-full sticky top-0",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2 border-b",children:"S.No"}),(0,a.jsx)("th",{className:"px-4 py-2 border-b",children:"Name"}),(0,a.jsx)("th",{className:"px-4 py-2 border-b",children:"Department"}),(0,a.jsx)("th",{className:"px-4 py-2 border-b",children:"Email"}),(0,a.jsx)("th",{className:"px-4 py-2 border-b",children:"Number"}),(0,a.jsx)("th",{className:"px-4 py-2 border-b",children:"Active"})]})}),(0,a.jsx)("tbody",{children:null==r?void 0:r.map((e,r)=>(0,a.jsxs)("tr",{className:"odd:bg-gray-50 even:bg-white hover:bg-gray-100 transition-colors",children:[(0,a.jsx)("td",{className:"px-4 py-2 text-[14px] text-[#767676] ",children:(t-1)*s+r+1}),(0,a.jsx)("td",{className:"px-4 py-2 text-[14px] text-[#767676] ",children:e.name}),(0,a.jsx)("td",{className:"px-4 py-2 text-[14px] text-[#767676] ",children:e.department}),(0,a.jsx)("td",{className:"px-4 py-2 text-[14px] text-[#767676] ",children:e.email}),(0,a.jsx)("td",{className:"px-4 py-2 text-[14px] text-[#767676] ",children:e.phone}),(0,a.jsx)("td",{className:"px-4 py-2 text-[14px] text-[#767676] ",children:"active"===e.active?"Yes":"No"})]},e.id))})]})})}),c=e=>{let{first:t,prev:s,next:r,last:l,pages:n,items:c,currentPage:o,onPageChange:d}=e,i=n||1,x=e=>{let t=Math.max(1,Math.min(e,i));t!==o&&d(t)};return(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center px-2 sm:px-4 py-2 bg-white rounded-md font-roboto gap-2 sm:gap-0",children:[(0,a.jsxs)("span",{className:"text-xs sm:text-sm text-gray-400 text-center sm:text-left",children:["Page ",o," of ",i," (",c," Students)"]}),(0,a.jsxs)("div",{className:"flex flex-wrap justify-center sm:justify-end space-x-1 sm:space-x-2",children:[(0,a.jsx)("button",{onClick:()=>x(o-1),disabled:o===t,className:"px-2 sm:px-3 py-1 rounded text-xs sm:text-sm ".concat(o===t?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-300 text-gray-600 hover:bg-gray-400"),children:"Previous"}),(()=>{let e=Math.max(1,o-2),t=Math.min(i,e+3),s=[];for(let a=e;a<=t;a++)s.push(a);return s})().map(e=>(0,a.jsx)("button",{onClick:()=>x(e),className:"px-2 sm:px-3 py-1 rounded text-xs sm:text-sm ".concat(e===o?"bg-blue-600 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"),children:e},e)),(0,a.jsx)("button",{onClick:()=>x(o+1),disabled:o===l,className:"px-2 sm:px-3 py-1 rounded text-xs sm:text-sm ".concat(o===l?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-300 text-gray-600 hover:bg-gray-400"),children:"Next"})]})]})},o=e=>{let{onDepartmentChange:t,onStatusChange:s}=e;return(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 p-4 bg-white shadow-md rounded-lg mb-1",children:[(0,a.jsx)("label",{htmlFor:"department",className:"text-[14px] text-[#767676] font-roboto",children:"Sort by department:"}),(0,a.jsx)("select",{name:"department",id:"department",onChange:e=>t(e.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 w-full md:w-48 text-[14px] text-[#767676] font-roboto",children:["All","Computer Science","Physics","Mathematics","Chemistry","Biology"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))}),(0,a.jsx)("label",{htmlFor:"status",className:"text-[14px] text-[#767676] font-roboto",children:"Sort by status:"}),(0,a.jsx)("select",{name:"status",id:"status",onChange:e=>s(e.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 w-full md:w-48 text-[14px] text-[#767676] font-roboto",children:["All","active","Inactive"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})},d=async e=>{let{page:t,limit:s,department:a,active:r,all:l}=e;try{let e="_page=".concat(t);"All"===a&&(e+="_page=1"),a&&(e+="&department=".concat(a)),r&&(e+="&active=".concat(r));let s=await fetch("https://json-server-itxt.onrender.com/students?".concat(e));if(!s.ok)throw Error("HTTP Error: ".concat(s.status));let l=s.headers.get("X-Total-Count");return{data:await s.json(),total:l?Number(l):0}}catch(e){return console.error("Error fetching students:",e),{data:[],total:0}}};var i=s(922);function x(){var e,t;let s=(0,r.useRouter)(),{state:x,dispatch:u}=(0,i.A)(),{firstname:m}=null!=(t=null==x||null==(e=x.user)?void 0:e.name)?t:{},{loading:h,error:p,students:b,pagination:g,page:f,setPage:y,department:j,setDepartment:N,active:v,setActive:w,limit:S}=(()=>{let[e,t]=(0,l.useState)(!1),[s,a]=(0,l.useState)(""),[r,n]=(0,l.useState)([]),[c,o]=(0,l.useState)(1),[i,x]=(0,l.useState)(),[u,m]=(0,l.useState)(""),[h,p]=(0,l.useState)("active"),b=async()=>{t(!0);try{let e=await d({page:c,limit:10,department:u||"",active:h});n(e.data.data),x(e.data)}catch(e){console.error("Failed to fetch students:",e),a("Failed to fetch data")}finally{t(!1)}};return(0,l.useEffect)(()=>{b()},[c,u,h]),{loading:e,error:s,students:r,pagination:i,page:c,setPage:o,department:u,setDepartment:m,active:h,setActive:p,getStudents:b,limit:10}})();return(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[250px_1fr] h-screen",children:[(0,a.jsxs)("aside",{className:"bg-[#bae6fd] text-white p-6 hidden md:block",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4 text-black",children:"Dashboard"})}),(0,a.jsxs)("ul",{className:"space-y-2",children:[(0,a.jsx)("li",{className:"hover:text-black-600 cursor-pointer text-black bg-[#99d8fa] px-4 py-2 rounded",children:"Students"}),(0,a.jsx)("li",{className:"hover:text-black-600 cursor-pointer text-black px-4 py-2 rounded",children:"Add student"})]})]}),(0,a.jsxs)("main",{className:"bg-[#c8ecff] p-2 md:p-10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h1",{className:" text-[16px]  md:text-3xl  font-semibold py-4",children:["Welcome, ",(0,a.jsx)("span",{className:"uppercase",children:m})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("button",{onClick:()=>{u({type:"LOGOUT",user:null}),s.push("/")},className:"bg-blue-400 px-2 py-1  custom-button text-white hover:bg-blue-500 transition duration-300 cursor-pointer",children:"Logout"}),(0,a.jsx)("button",{onClick:()=>{},className:"bg-[#6ec6f5] px-2 py-1  custom-button text-white hover:bg-blue-400 transition duration-300 cursor-pointer block md:hidden",children:"Add Student"})]})]}),(0,a.jsx)(o,{onDepartmentChange:e=>N(e),onStatusChange:e=>w(e)}),(0,a.jsx)("div",{className:"bg-white rounded shadow p-6 mb-2 md:min-h-[500px] max-h-full max-h-[500px]",children:h?null:p?(0,a.jsx)("p",{className:"text-red-500",children:p}):(0,a.jsx)(n,{studentList:b,page:f,limit:S})}),(0,a.jsx)("div",{className:"bg-white rounded shadow p-2",children:b&&g&&(0,a.jsx)(c,{first:g.first,prev:g.prev,next:g.next,last:g.last,pages:g.pages,items:g.items,currentPage:f,onPageChange:e=>y(e)})})]})]})}},922:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>o,A:()=>d});var a=s(5155),r=s(2115);let l=(e,t)=>{switch(t.type){case"LOGIN":return{isAuthenticated:!0,user:t.payload};case"LOGOUT":return{isAuthenticated:!1,user:null};default:return e}},n=(0,r.createContext)(),c=()=>{{let e=localStorage.getItem("auth");return e?JSON.parse(e):{isAuthenticated:!1,user:null}}},o=e=>{let{children:t}=e,[s,o]=(0,r.useReducer)(l,{},c);return(0,r.useEffect)(()=>{localStorage.setItem("auth",JSON.stringify(s))},[s]),(0,a.jsx)(n.Provider,{value:{state:s,dispatch:o},children:t})},d=()=>{let e=(0,r.useContext)(n);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},4240:(e,t,s)=>{Promise.resolve().then(s.bind(s,428))},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})}},e=>{e.O(0,[441,964,358],()=>e(e.s=4240)),_N_E=e.O()}]);